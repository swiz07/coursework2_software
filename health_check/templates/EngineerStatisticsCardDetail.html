{% extends 'DeptLeaderHomeMain.html' %}
{% load static %}
{% block content %}
<div class="container mt-4">
  <a href="{% url 'engineer_statistics_viewall' %}" class="btn btn-outline-secondary mb-3">
    &larr; View All
  </a>
  <div class="card p-3">
    <h4>{{ card.title }}</h4>
    <p>{{ card.description }}</p>
    <div class="d-flex justify-content-around mb-3">
      <span class="badge bg-danger rounded-circle p-2">{{ card.red }}</span>
      <span class="badge bg-warning text-dark rounded-circle p-2">{{ card.yellow }}</span>
      <span class="badge bg-success rounded-circle p-2">{{ card.green }}</span>
    </div>
    <!-- Chart showing card stats -->
    <canvas id="detailPieChart" width="300" height="300"></canvas>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function(){
  const ctx = document.getElementById('detailPieChart');
  if (ctx) {
    new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Red','Yellow','Green'],
        datasets: [{
          data: [{{ card.red }}, {{ card.yellow }}, {{ card.green }}],
          backgroundColor: ['#dc3545', '#ffc107', '#28a745']
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' }
        }
      }
    }); 
  }
});
</script>
{% endblock %}
